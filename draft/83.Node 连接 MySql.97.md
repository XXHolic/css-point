# 83.Node 连接 MySql.97
## <a name="index"></a> 目录
- [引子](#start)
- [index 1](#index1)
  - [index 12](#index12)
- [参考资料](#reference)


## <a name="start"></a> 引子
尝试使用 Node 连接数据库。

## 安装
系统：macOS Catalina 10.15.7

### MySql
使用工具 Homebrew
```
# 搜索看下有没有
brew search mysql
# 查看下相关信息，是不是想要的
brew info mysql
# 安装
brew install mysql
```

这个时候要注意安装之后的提示信息：
- 版本 8.0.22 。
- 安装的 MySql ，没有设置密码，要想更安全，运行命令：mysql_secure_installation 。
- MySql 默认配置只允许从本地连接。
- 想要连接，运行命令： mysql -uroot 。
- 启动命令： brew services start mysql ，如果不想要后台运行服务，运行命令： mysql.server start 。

执行 `mysql_secure_installation` 会提示各种相关的设置，比如密码，是否禁止远程 root 登录，移除测试表等等。

执行 mysql -uroot 时，出现下面的提示：
> ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)

按照官网上输入的指令 `mysql -u root -p` ，提示输入密码，输入 123456 就进入了，很奇怪，网上看都是要重置密码。

### 其它命令
一些常用命令：
- mysql.server status ： 查看 sql 运行状态
- 查看 sql 运行状态： mysql.server status;
- 查看数据库： select database();
- 查看表: show tables;
- 查看用户： select user();
- 查看当前用户： select current_user();
- 查看密码策略： SHOW VARIABLES LIKE 'validate_password%';

### 服务启动/关闭
- mysql.server start
- mysql.server stop

### 连接
- mysql -u root -p

### Node


## 连接数据库


## 错误
### ERROR! The server quit without updating PID file
不要直接搜这个，先去看提示中给出的文件，里面显示了具体的错误原因，然后再去搜索会更方便。

### Your password does not satisfy the current policy requirements
先查看密码策略，再按照个人需求执行

1. set global validate_password.policy=LOW;
2. set global validate_password.length=6;
3. ALTER USER 'root'@'localhost' IDENTIFIED BY 'password' PASSWORD EXPIRE NEVER;
4. ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';
5. FLUSH PRIVILEGES;

### Client does not support authentication protocol requested by server
https://stackoverflow.com/questions/50093144/mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server

https://stackoverflow.com/questions/50093144/mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server/56509065#56509065



<div align="right"><a href="#index">Back to top :arrow_up:</a></div>


## <a name="reference"></a> 参考资料
- [example][url-base]

[url-local-1]:../images/database/mongo-shell.png

[url-base]:https://xxholic.github.io/segment