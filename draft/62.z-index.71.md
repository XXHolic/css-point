# 62.z-index.71
## <a name="index"></a> 目录
- [引子](#start)
- [隐藏 Safari 导航栏](#hide)
- [显示 Safari 导航栏](#show)
- [iPhone 系统占比](#statistics)
- [参考资料](#reference)

## <a name="start"></a> 引子
最近在使用第三方组件的时候，发现无法在一个弹窗里面再次正常弹窗。首先想到跟堆叠层级属性 z-index 有关，于是再次回顾总结一下

## <a name="hide"></a> z-index

Name | z-index
:------------ | :-------------
可取值 | auto \| <integer> \| inherit
默认值 | auto
适用于 | 定位元素
继承性 | 无

定位元素是指 position 的指为非 static 的元素。对于定位元素，z-index 属性指定了：
- 盒子在当前堆叠上下文（stacking context）中的堆叠层级。
- 盒子是否创建一个堆叠上下文。

取值有下面的含义：
- <integer> ：是生成的盒子在当前堆叠上下文中的堆叠层级。这个盒子也会创建一个新的堆叠上下文。
- auto ：生成的盒子在当前堆叠上下文中的堆叠层级是 0 。这个盒子不会创建一个新的堆叠上下文，除非是根元素。


在 CSS 2.1 中，每个盒子在三个纬度上，都有一个位置。除了它们的垂直和水平位置，盒子沿着“Z轴”排列，且在另外某个层级之上格式化。当盒子在视觉上重叠时，与Z轴的位置关系密切。接下来会讨论盒子在Z轴上可能如何放置。

渲染树绘制到画布上的顺序是根据堆叠上下文描述的。堆叠上下文可以包含更多的堆叠上下文。从父堆叠上下文的角度来看，堆栈上下文是原子单一性。每个盒子属于一个堆叠上下文。在给定的堆叠上下文 A 中，每个已定位的盒子拥有一个整数堆叠层级，该整数堆叠层级在Z轴上的位置，是相对于在堆叠上下文 A 中的其它堆叠层级。堆叠层级高的盒子总是在堆叠层级低的盒子之上格式化。盒子也可能有负的堆叠层级。在同一堆叠上下文中，相同的堆叠层级根据文档树的顺序从后到前堆叠。

根元素形成根堆叠上下文。其它堆叠上下文，由拥有 z-index 属性值是 auto 之外有效值的任何非 static 定位元素产生。堆叠上下文不一定与包含块有关。在将来的 CSS 层级中，其它属性可能会引入堆叠上下文，例如 opacity 。

在每个堆叠上下文中，下面的层级按照从后到前的顺序绘制：
1. 形成堆叠上下文元素的背景和边逛。
2. 负堆叠层级的后代堆叠上下文。
3. 在文档流，非内联，非定位后代。
4. 非定位浮动。
5. 在文档流，内联，非定位后代，包括内联表格和内联块。
6. 堆叠层级为 0 的后代堆叠上下文 和 定位后代。
7. 有正数堆叠层级的后代堆叠上下文。

在每个堆栈上下文中，堆叠级别为0（第6）、非定位浮动（第4）、内联块（第5）和内联表（第5）的定位元素，绘制时好像这些元素本身生成了新的堆栈上下文，但其定位的子体和任何可能的子堆叠上下文都参与当前堆叠上下文。

这个绘制顺序递归的应用于每一个堆叠上下文，详细的定义见 [Appendix E][url-appendix-e] 。



<div align="right"><a href="#index">Back to top :arrow_up:</a></div>





## <a name="reference"></a> 参考资料
- [z-index MDN][url-mdn-z-index]
- [z-index Recommendation][url-z-index]
- [z-index draft][url-z-index-draft]


[url-base]:https://xxholic.github.io/segment

[url-mdn-z-index]:https://developer.mozilla.org/zh-CN/docs/Web/CSS/z-index
[url-z-index]:https://www.w3.org/TR/CSS2/visuren.html#z-index
[url-z-index-draft]:https://drafts.csswg.org/css2/visuren.html#layers
[url-appendix-e]:https://www.w3.org/TR/CSS2/zindex.html

[url-local-qr-pure-page]:../images/61/pure-page.png


<details>
<summary>:wastebasket:</summary>




</details>