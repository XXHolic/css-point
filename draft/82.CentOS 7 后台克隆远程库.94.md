# 82.CentOS 7 后台克隆远程库.94

## <a name="start"></a> 引子
解决 [CentOS 7 下 Git 超时][url-segment-81]后，发现库还是太大，要花费比较长的时间，还是让其在后台运行比较好，这样不用一直保持登录。找了下资料，总结一下。

## <a name="title1"></a> 相关知识点


## 实现方式
写一个脚本，然后让其后台运行。

`git.sh` 脚本内容很简单：
```shell
echo 'git clone start'

git clone https://github.com/XXx/xxx.git

echo 'git clone end'
```
在非可视化终端操作顺序：
```
# 创建文件
> git.sh

# 编辑文件
vim git.sh

# 执行脚本
nohup ./git.sh &
```
执行的时候出现了提示：
> nohup: 无法运行命令"./git.sh": 权限不够

添加权限：
```
chmod +x ./git.sh
```
再次执行脚本后，出现下面的提示：

![82-nohup][url-local-1]

注意这个时候，需要按任意键退回到 shell 输入命令窗口，退出的时候使用 exit 命令退出。

### 查看
查看正在执行的后台任务：
```
jobs -l
```
![82-jobs][url-local-2]

可以发现，跟执行脚本成功后出现的数字提示一致。

jobs 命令只对当前终端有效，关闭或退出终端后，在另一个终端 jobs 命令无法看到后台运行的程序，此时可以使用 ps 命令：
```
ps -aux|grep git.sh
```
![82-ps][url-local-3]

如果想要关闭对应进程：
```
kill -9 进程号
```



## 其它
Mac 下执行 shell 脚本提示没有权限：

> permission denied: ./git.sh

修改权限后再次执行就可以了
```
chmod 777 ./git.sh

./git.sh
```

<div align="right"><a href="#index">Back to top :arrow_up:</a></div>


## <a name="reference"></a> 参考资料
- [nohup和&后台运行，进程查看及终止][url-article-1]
- [Linux 命令大全][url-article-2]


[url-article-1]:https://www.cnblogs.com/baby123/p/6477429.html
[url-article-2]:https://www.runoob.com/linux/linux-command-manual.html

[url-segment-81]:https://github.com/XXHolic/segment/issues/93

[url-local-1]:../images/82/nohup.png
[url-local-2]:../images/82/jobs.png
[url-local-3]:../images/82/ps.png

<details>
<summary>:wastebasket:</summary>


![n-poster][url-local-poster]

</details>

[url-book]:https://book.douban.com/subject/26916012/
[url-local-poster]:../images/n/poster.jpg
